<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <head th:replace="fragments/layout :: head(title='The wall')">
        <meta charset="UTF-8" />
        <title>Hello world</title>
    </head>
    <body>
        <div th:replace="fragments/layout.html :: links(nickname=${account.nickname}, owner=${owner})"></div>
        <div class="container">
            

            <div th:if="${owner}">
                <h1 th:text="${'Hello ' + account.nickname}">Hello world</h1>
                <h2>
                    What's on your mind?
                </h2>
                <form method="POST" th:action="@{/shout}">
                    <textarea name="tweeter" id="tweeter"></textarea><br />
                    <input type="submit" value="Shout!" />
                </form>
            </div>

            <div>
                <div th:if="${messages.size() == 0}" th:text="'No posts by ' + ${account.nickname}"></div>
                <div th:each="message: ${messages}">
                    <div th:text="${message.message}"></div>
                    <div th:text="${#temporals.format(message.messageTime, 'dd-MM-yyyy HH:mm')}"></div><br />
                    <form method="POST" th:action="@{/comment/{postid}(postid = ${message.id})}">
                        <textarea id="comment" name="comment"></textarea><br />
                        <input type="submit" value="Comment" />
                    </form>
                    <div th:unless='${message.comments.size() == 0}'>
                        <div style="padding-bottom: 5px" th:each="comment: ${message.getComments()}">
                            <span th:text="'Comment by ' + ${comment.account.nickname}"></span>
                            <span th:text="${#temporals.format(comment.commentTime, 'dd-MM-yyyy HH:mm')}"></span>
                            <div th:text="'Commented: ' + ${comment.comment}"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>

